<!DOCTYPE html>
<html>
<title>DATA is beautiful</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>

.node {
  cursor: pointer;
}

.node:hover {
  stroke: #000;
  stroke-width: 1.5px;
}

.node--leaf {
  
}

.label {
  font: 11px "Raleway", Arial, sans-serif;
  text-anchor: middle;
  color: "#ff0000";
  
}

.label,
.node--root,
.node--leaf {
  pointer-events: none;
}
circle {
	stroke: white;
	fill: steelblue;
	opacity: 0.08;
	stroke-width: 1px;
}

</style>
<style>
body,h1 {font-family: "Raleway", Arial, sans-serif}
h1 {letter-spacing: 6px}
.w3-row-padding img {margin-bottom: 12px}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<body>

<!-- !PAGE CONTENT! -->
<div class="w3-content" style="max-width:1500px">

<!-- Header -->
<header class="w3-panel w3-center w3-opacity" style="padding:8px 16px">
  <h1>DATA</h1>
  <h1 class="w3-xlarge">is beautiful.st</h1>
  
  
  <div class="w3-padding-32">
    <div class="w3-bar w3-border">
      <a href="#" class="w3-bar-item w3-button">Home</a>
      <a href="#" class="w3-bar-item w3-button w3-light-grey">Projekt 1</a>
      <a href="#" class="w3-bar-item w3-button">Projekt 2</a>
      <a href="#" class="w3-bar-item w3-button w3-hide-small">Projekt 3</a>
    </div>
  </div>
</header>

<!-- Grid -->
<div class="w3-row-padding  w3-border" style="margin-bottom:10px;margin-left:10px;margin-right:10px">
  <div class="w3-half">
    <svg id="myChart1" width="600" height="600"></svg>
  </div>

  <div class="w3-half">
    <p style="width:100%">Sveriges befolkning 2017<br>Klicka på grafen för att se detaljer!<br>Källa: scb.se<br>	
	    D3.js: https://beta.observablehq.com/@mbostock/d3-zoomable-circle-packing</p>
</div>
</div>
<div class="w3-row-padding  w3-border" style="margin-bottom:128px;margin-left:10px;margin-right:10px"">
  <div class="w3-half">
    <canvas id="myChart2" style="width:100%"></canvas>
  </div>
  <div class="w3-half">
    <p style="width:100%">Lorem ipsum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
	et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
	ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
	fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
	mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
	magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
</div>
<!-- End Page Content -->
</div>

<!-- Footer -->
<footer class="w3-container w3-padding-64 w3-light-grey w3-center w3-large"> 
  <a href="https://www.linkedin.com/in/dataisbeautiful/"><i class="fa fa-linkedin w3-hover-opacity"></i></a>
  <i class="fa fa-facebook-official w3-hover-opacity"></i>
  <i class="fa fa-instagram w3-hover-opacity"></i>
  <i class="fa fa-twitter w3-hover-opacity"></i>
  <p>Gergely Szabo</p>
  <p>2019</p>
</footer>

</body>
<script>
Chart.defaults.global.defaultFontFamily = 'Raleway';

new Chart(document.getElementById("myChart2"), {
  type: 'line',
  data: {
    labels: [2008,2009,2010,2011,2012,2013,2014,2015,2016,2017],
    datasets: [{ 
        data: [1,6,4,3,8,9,10,8,7,11],
        label: "Label 1",
        borderColor: "#C62168",
		backgroundColor: "#C62168",
        fill: false
      }, { 
        data: [10,2,4,5,8,9,10,4,7,9],
        label: "Label 2",
        borderColor: "blue",
		backgroundColor: "blue",
        fill: false
      }
    ]
  },
  options: {
    title: {
      display: true,
      text: 'test 2'
    }
  }
});
</script>
<script>

var svg = d3.select("#myChart1"),
    margin = 20,
    diameter = +svg.attr("width"),
    g = svg.append("g").attr("transform", "translate(" + diameter / 2 + "," + diameter / 2 + ")"),
	width = +svg.attr("width"),
    height = +svg.attr("height");


var pack = d3.pack()
    .size([diameter - margin, diameter - margin])
    .padding(2);

var stratify = d3.stratify()
    .parentId(function(d) { return d.id.substring(0, d.id.lastIndexOf(".")); });

var pack = d3.pack()
    .size([width - 2, height - 2])
    .padding(3);

d3.csv("https://raw.githubusercontent.com/20795/Datasets/master/BE0101N1_2017_punkt.csv", function(error, data) {
  if (error) throw error;

  var root = stratify(data)
      .sum(function(d) { return d.value; })
      .sort(function(a, b) { return b.value - a.value; });

  pack(root);

  var focus = root,
      nodes = pack(root).descendants(),
      view;

  var circle = g.selectAll("circle")
    .data(nodes)
    .enter().append("circle")
      .attr("class", function(d) { return d.parent ? d.children ? "node" : "node node--leaf" : "node node--root"; })

      .on("click", function(d) { if (focus !== d) zoom(d), d3.event.stopPropagation(); });

  var text = g.selectAll("text")
    .data(nodes)
    .enter().append("text")
      .attr("class", "label")
      .style("fill-opacity", function(d) { return d.parent === root ? 1 : 0; })
      .style("display", function(d) { return d.parent === root ? "inline" : "none"; })
      .text(function(d) {return d.id.substring(d.id.lastIndexOf(".")+1)+": "+d.value; });

  var node = g.selectAll("circle,text");

  svg

      .on("click", function() { zoom(root); });

  zoomTo([root.x, root.y, root.r * 2 + margin]);

  function zoom(d) {
    var focus0 = focus; focus = d;

    var transition = d3.transition()
        .duration(d3.event.altKey ? 7500 : 750)
        .tween("zoom", function(d) {
          var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2 + margin]);
          return function(t) { zoomTo(i(t)); };
        });

    transition.selectAll("text")
      .filter(function(d) { return d.parent === focus || this.style.display === "inline"; })
        .style("fill-opacity", function(d) { return d.parent === focus ? 1 : 0; })
        .on("start", function(d) { if (d.parent === focus) this.style.display = "inline"; })
        .on("end", function(d) { if (d.parent !== focus) this.style.display = "none"; });
  }

  function zoomTo(v) {
    var k = diameter / v[2]; view = v;
    node.attr("transform", function(d) { return "translate(" + (d.x - v[0]) * k + "," + (d.y - v[1]) * k + ")"; });
    circle.attr("r", function(d) { return d.r * k; });
  }
});

</script>
</html>
